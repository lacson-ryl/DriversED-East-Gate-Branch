# Dockerfile.webhook
FROM node:20-slim
WORKDIR /app

# Install only what's needed
RUN apt-get update && apt-get install -y \
  ca-certificates \
  && apt-get clean && rm -rf /var/lib/apt/lists/*

# Copy only what's needed for the webhook
COPY package*.json ./
RUN npm install

COPY ./webhook-server.js ./middleware ./utils ./

# Optional: if you use dotenv or other config files
COPY .env.production ./

EXPOSE 9000
CMD ["node", "webhook-server.js"]
